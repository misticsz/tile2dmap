<!DOCTYPE html><html><head><script type="text/javascript">var ctx = null;size = 25
    var i = 0;
    var gameMap = new Array();

    function findImageByName(name,tile,imageCounter){
	var i = 0;
    var aux = 0;
	while(i<imageCounter){
		if(tile[i].name==name){
            aux=i;
        }
        i++;
	}
    return aux;
    }


    for(i=0;i<=25*25;i++){
        gameMap[i] = 0;
    }
    /*Tile Loading */
    var image = new Array();
    var tile = new Array();



tile[0] = {
 path:"mario/sprite_125.png", name:'water'};
image[0] = new Image(40,40);
image[0].src = tile[0].path;

tile[1] = {
 path:"mario/sprite_318.png", name:'ice'};
image[1] = new Image(40,40);
image[1].src = tile[1].path;

tile[2] = {
 path:"mario/sprite_087.png", name:'trap'};
image[2] = new Image(40,40);
image[2].src = tile[2].path;

tile[3] = {
 path:"mario/sprite_809.png", name:'tunel'};
image[3] = new Image(40,40);
image[3].src = tile[3].path;




/*Preencher*/
 var temp;
 var it;
 for(it=0;it<2;it++){
  temp = 2+(it*25);
 gameMap[temp] =  findImageByName("ice",tile,4);
 }

/*Preencher*/
 var temp;
 var it;
 for(it=2;it<4;it++){
  temp = it+50;
 gameMap[temp] =  findImageByName("ice",tile,4);
 }

/*Preencher*/
 var temp;
 var it;
 for(it=2;it<4;it++){
  temp = 4+(it*25);
 gameMap[temp] =  findImageByName("ice",tile,4);
 }

/*Preencher*/
 var temp;
 var it;
 for(it=4;it<11;it++){
  temp = it+100;
 gameMap[temp] =  findImageByName("ice",tile,4);
 }

/*Preencher*/
 var temp;
 var it;
 for(it=4;it<14;it++){
  temp = 11+(it*25);
 gameMap[temp] =  findImageByName("ice",tile,4);
 }

/*Preencher*/
 var temp;
 var it;
 for(it=8;it<10;it++){
  temp = it+275;
 gameMap[temp] =  findImageByName("ice",tile,4);
 }

/*Preencher*/
 var temp;
 var it;
 for(it=12;it<14;it++){
  temp = it+300;
 gameMap[temp] =  findImageByName("ice",tile,4);
 }

/*Preencher*/
 var temp;
 var it;
 for(it=12;it<19;it++){
  temp = it+400;
 gameMap[temp] =  findImageByName("ice",tile,4);
 }
gameMap[283] = findImageByName("tunel",tile,4);
gameMap[414] = findImageByName("tunel",tile,4);
gameMap[386] = findImageByName("trap",tile,4);
gameMap[289] = findImageByName("trap",tile,4);
gameMap[339] = findImageByName("trap",tile,4);

/*Preencher*/
 var temp;
 var it;
 for(it=11;it<14;it++){
  temp = 15+(it*25);
 gameMap[temp] =  findImageByName("trap",tile,4);
 }


    var tileW = 17, tileH = 17;
    var mapW = 25, mapH = 25;
    var currentSecond = 0, frameCount = 0, framesLastSecond = 0;
    var currentSecond = 0, frameCount = 0, framesLastSecond = 0;

    window.onload = function()
    {
    	ctx = document.getElementById('game').getContext("2d");
    	requestAnimationFrame(drawGame);
    	ctx.font = "bold 10pt sans-serif";
    };

    function drawGame()
    {

    	if(ctx==null) { return; }

    	var sec = Math.floor(Date.now()/1000);
    	if(sec!=currentSecond)
    	{
    		currentSecond = sec;
    		framesLastSecond = frameCount;
    		frameCount = 1;
    	}
    	else { frameCount++; }

    	for(var y = 0; y < mapH; ++y)
    	{
    		for(var x = 0; x < mapW; ++x)
    		{
    			switch(gameMap[((y*mapW)+x)])
    			{
                    case 0:
 ctx.drawImage(image[0],x*tileW,y*tileH);
 break;
case 1:
 ctx.drawImage(image[1],x*tileW,y*tileH);
 break;
case 2:
 ctx.drawImage(image[2],x*tileW,y*tileH);
 break;
case 3:
 ctx.drawImage(image[3],x*tileW,y*tileH);
 break;

    			}

    		}
    	}

    	ctx.fillStyle = "#ff0000";
    	ctx.fillText("FPS: " + framesLastSecond, 10, 20);

    	requestAnimationFrame(drawGame);
    }
    </script>

    </head>
    <body>

    <canvas id="game" width="1000" height="1000"></canvas>

    </body>
    </html>
